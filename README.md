Module 9 homework for RS School Machine Learning course.

This repository uses [Forest train](https://www.kaggle.com/competitions/forest-cover-type-prediction) dataset.
[Src layout](https://blog.ionelmc.ro/2014/05/25/python-packaging/#the-structure) was chosen for this task. The advantages are listed [here](https://blog.ionelmc.ro/2014/05/25/python-packaging/#the-structure)

## Usage
This package allows you to train model for predicting the forest cover type (the predominant kind of tree cover) from strictly cartographic variables.
1. Clone this repository to your machine.
2. Download [Forest train](https://www.kaggle.com/competitions/forest-cover-type-prediction/data) dataset, save csv locally (default path is *data/train.csv* in repository's root).
3. Make sure Python 3.9 and [Poetry](https://python-poetry.org/docs/) are installed on your machine (I use Poetry 1.1.13).
4. Install the project dependencies (*run this and following commands in a terminal, from the root of a cloned repository*):
```sh
poetry install --no-dev
```
5. Run train with the following command:
```sh
poetry run train -d <path to csv with data> -s <path to save trained model>
```
You can configure additional options (such as model type) in the CLI. To get full list of them use help:
```sh
poetry run train --help
```
6. Run MLflow UI to see the information about experiments you conducted:
```sh
poetry run mlflow ui
```
![image](https://user-images.githubusercontent.com/29108193/166215058-66832d25-4e6d-4383-ae02-610167397cbb.png)
7. Run eda to produce EDA report generated by [Pandas-profiling](https://github.com/ydataai/pandas-profiling):
```sh
poetry run eda -d <path to csv with data> -s <path to save generated report>
```
8. Create submission files with predictions. :
```
poetry run predict
```
You can configure options in the CLI. To get full list of them use help:
```sh
poetry run predict --help
```
## Development

The code in this repository must be tested, formatted with black, and pass mypy typechecking before being commited to the repository.

Install all requirements (including dev requirements) to poetry environment:
```
poetry install
```
Now you can use developer instruments, e.g. pytest:
```
poetry run pytest
```
![image](https://user-images.githubusercontent.com/29108193/167133835-b600dd5f-e684-4c04-89de-1a0262a6f2ab.png)

Use [flake8](https://flake8.pycqa.org/en/latest/) for linting. For example:
```
poetry run flake8 src tests noxfile.py
```
![image](https://user-images.githubusercontent.com/29108193/167133974-cddc5034-9895-404d-96ea-fab601d44160.png)

Format your code with [black](https://github.com/psf/black):
```
poetry run black src tests noxfile.py
```
![image](https://user-images.githubusercontent.com/29108193/167134109-17bd7f86-3f9e-41df-b307-d24f6c68643d.png)

Check types with [mypy](https://mypy.readthedocs.io/en/stable/)
```
poetry run mypy src tests noxfile.py
```
![image](https://user-images.githubusercontent.com/29108193/167134232-ef247ccf-e05f-4f25-be6b-bc0963e8e8d4.png)

More conveniently, to run all sessions of testing, formatting and type checking in a single command, install and use [nox](https://nox.thea.codes/en/stable/): 
```
nox [-r]
```
![image](https://user-images.githubusercontent.com/29108193/167135190-3d2b3cc1-8066-482a-a1f4-32011f009cfc.png)

Or if you want to run specific step
```
nox -[r]s flake8
nox -[r]s black
nox -[r]s tests
nox -[r]s mypy
```









